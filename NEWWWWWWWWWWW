local Players = game:GetService("Players")
local VirtualUser = game:GetService("VirtualUser")
local RS = game:GetService("ReplicatedStorage")
local VIM = game:GetService("VirtualInputManager")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local LP = Players.LocalPlayer
local muscleEvent = LP:WaitForChild("muscleEvent")
local leaderstats = LP:WaitForChild("leaderstats")
local rebirthsStat = leaderstats:WaitForChild("Rebirths")

local BlacklistedUsers = {"DulceSkyx","HonnyyDezz","Honnydezz_z","itsBAJAMILIONcat","HonnyDezz_11","PR_inmortal","F3RNO0O00000","xXLXGHTBRINGERXx"}
local BlacklistedPrefixes = {"SC_","KTA_","HZ_","VAL_","ZTX_"}

local function isBlacklisted(plr)
    local u,d = plr.Name:lower(),(plr.DisplayName or ""):lower()
    for _,n in ipairs(BlacklistedUsers) do if u==n:lower() then return true end end
    for _,p in ipairs(BlacklistedPrefixes) do local px=p:lower() if u:sub(1,#px)==px or d:sub(1,#px)==px then return true end end
    return false
end

if isBlacklisted(LP) then
    warn("[Spectra X] Blacklisted user detected")
    task.spawn(function()
        for i=1,10 do RS.rEvents.rebirthRemote:InvokeServer("rebirthRequest") task.wait(0.1) end
        LP:Kick("Spectra X | Access denied")
    end)
    return
end

LP.Idled:Connect(function() VirtualUser:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame) task.wait(1) VirtualUser:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame) end)

local displayName = LP.DisplayName~="" and LP.DisplayName or LP.Name
local title = ("Spectra X | Welcome %s"):format(displayName)

library = loadstring(game:HttpGet("https://raw.githubusercontent.com/CoronaBlanca/Lxbrxrys/refs/heads/main/Xlxrxxm"))()
local window = library:AddWindow(title,{main_color=Color3.fromRGB(27,6,87),min_size=Vector2.new(590,800),can_resize=true})

local HomeTab = window:AddTab("Home")
HomeTab:AddLabel("╭──────────────────────────╮")
HomeTab:AddLabel("    Welcome To Spextra X")
HomeTab:AddLabel("╰──────────────────────────╯")
HomeTab:AddLabel("")
HomeTab:AddLabel("Script Made By")
HomeTab:AddLabel("")
HomeTab:AddLabel("Sherya (Isabella)")
HomeTab:AddLabel("")
HomeTab:AddLabel("Instagram : sheryaluck")
HomeTab:AddLabel("Tik tok : xvisherys")
HomeTab:AddLabel("Discord : isabella_hrz")
HomeTab:AddLabel("Roblox : MissSherya")
HomeTab:AddLabel("")
HomeTab:AddLabel("Thanks for using the script")
HomeTab:AddLabel("Errors to discord server")
HomeTab:AddLabel("")
HomeTab:AddButton("Servidor Discord",function() setclipboard("https://discord.gg/zYrg2qPjTp") end)

local MainTab = window:AddTab("Main")
local BrawlFolder = MainTab:AddFolder("  Brawls")

getgenv().godModeBrawl,getgenv().autoWinBrawl,getgenv().autoJoinBrawl = false,false,false

local function getChar() return LP.Character end
local function equipPunch()
    if not getgenv().autoWinBrawl then return end
    local c = getChar() if not c or c:FindFirstChild("Punch") then return end
    for _,t in pairs(LP.Backpack:GetChildren()) do if t:IsA("Tool") and t.Name=="Punch" then t.Parent=c break end end
end
local function isReady()
    local c,h = getChar(),nil
    h = c and c:FindFirstChild("Humanoid")
    return h and h.Health>0 and (c:FindFirstChild("LeftHand") or c:FindFirstChild("RightHand"))
end
local function validTarget(plr)
    if plr==LP or not plr.Character then return false end
    local h = plr.Character:FindFirstChild("Humanoid")
    return h and h.Health>0 and plr.Character:FindFirstChild("HumanoidRootPart")
end
local function touch(p1,p2) pcall(function() firetouchinterest(p1,p2,0) task.wait() firetouchinterest(p1,p2,1) end) end

BrawlFolder:AddSwitch("God Mode Brawl",function(s)
    getgenv().godModeBrawl=s
    if not s then return end
    task.spawn(function() while getgenv().godModeBrawl do RS.rEvents.brawlEvent:FireServer("joinBrawl") task.wait() end end)
end)

BrawlFolder:AddSwitch("Auto Win Brawls",function(s)
    getgenv().autoWinBrawl=s
    if not s then return end
    task.spawn(function() while getgenv().autoWinBrawl do if LP.PlayerGui.gameGui.brawlJoinLabel.Visible then RS.rEvents.brawlEvent:FireServer("joinBrawl") LP.PlayerGui.gameGui.brawlJoinLabel.Visible=false end task.wait(0.5) end end)
    task.spawn(function() while getgenv().autoWinBrawl do equipPunch() task.wait(0.5) end end)
    task.spawn(function() while getgenv().autoWinBrawl do if isReady() and RS.brawlInProgress.Value then pcall(function() LP.muscleEvent:FireServer("punch","leftHand") LP.muscleEvent:FireServer("punch","rightHand") end) end task.wait(0.1) end end)
    task.spawn(function() while getgenv().autoWinBrawl do if isReady() and RS.brawlInProgress.Value then local c=getChar() local lh,rh=c.LeftHand,c.RightHand for _,plr in pairs(Players:GetPlayers()) do if validTarget(plr) then local r=plr.Character.HumanoidRootPart if lh then touch(r,lh) end if rh then touch(r,rh) end end end end task.wait(0.05) end end)
end)

BrawlFolder:AddSwitch("Auto Join Brawls",function(s)
    getgenv().autoJoinBrawl=s
    if not s then return end
    task.spawn(function() while getgenv().autoJoinBrawl do pcall(function() if LP.PlayerGui.gameGui.brawlJoinLabel.Visible then RS.rEvents.brawlEvent:FireServer("joinBrawl") LP.PlayerGui.gameGui.brawlJoinLabel.Visible=false end end) task.wait(0.5) end end)
end)

getgenv().working = false
local jungleGymFolder = MainTab:AddFolder("  Jungle Gym")
local function pressE() VIM:SendKeyEvent(true,"E",false,game) task.wait(0.1) VIM:SendKeyEvent(false,"E",false,game) end
local function autoLift() while getgenv().working do LP.muscleEvent:FireServer("rep") task.wait() end end
local function startGym(cf)
    local c = LP.Character if not (c and c:FindFirstChild("HumanoidRootPart")) then return end
    c.HumanoidRootPart.CFrame=cf task.wait(0.1) pressE() task.spawn(autoLift)
end

jungleGymFolder:AddSwitch("Jungle Bench Press",function(s) getgenv().working=s if s then startGym(CFrame.new(-8173,64,1898)) end end)
jungleGymFolder:AddSwitch("Jungle Squat",function(s) getgenv().working=s if s then startGym(CFrame.new(-8352,34,2878)) end end)
jungleGymFolder:AddSwitch("Jungle Pull Ups",function(s) getgenv().working=s if s then startGym(CFrame.new(-8666,34,2070)) end end)
jungleGymFolder:AddSwitch("Jungle Boulder",function(s) getgenv().working=s if s then startGym(CFrame.new(-8801,38,2594)) end end)

local farmGymsFolder = MainTab:AddFolder("  Gyms")
local workoutPositions = {
    ["Bench Press"]={["Eternal Gym"]=CFrame.new(-7176.19,45.39,-1106.31),["Legend Gym"]=CFrame.new(4111.91,1020.46,-3799.97),["Muscle King Gym"]=CFrame.new(-8590.06,46.01,-6043.34)},
    ["Squat"]={["Eternal Gym"]=CFrame.new(-7176.19,45.39,-1106.31),["Legend Gym"]=CFrame.new(4304.99,987.82,-4124.23),["Muscle King Gym"]=CFrame.new(-8940.12,13.16,-5699.13)},
    ["Deadlift"]={["Eternal Gym"]=CFrame.new(-7176.19,45.39,-1106.31),["Legend Gym"]=CFrame.new(4304.99,987.82,-4124.23),["Muscle King Gym"]=CFrame.new(-8940.12,13.16,-5699.13)},
    ["Pull Up"]={["Eternal Gym"]=CFrame.new(-7176.19,45.39,-1106.31),["Legend Gym"]=CFrame.new(4304.99,987.82,-4124.23),["Muscle King Gym"]=CFrame.new(-8940.12,13.16,-5699.13)}
}
local workoutTypes = {"Bench Press","Squat","Deadlift","Pull Up"}
local gymLocations = {"Eternal Gym","Legend Gym","Muscle King Gym"}
getgenv().workingGym = false
local gymToggles = {}
local function teleportAndStart(cf)
    local c = LP.Character if not (c and c:FindFirstChild("HumanoidRootPart")) then return end
    c.HumanoidRootPart.CFrame=cf task.wait(0.15) pressE() task.spawn(autoLift)
end

for _,wt in ipairs(workoutTypes) do
    local cn = string.gsub(wt," ","")
    _G["selected"..cn.."Gym"]=gymLocations[1]
    local dd = farmGymsFolder:AddDropdown(wt.." - Gym",function(v) _G["selected"..cn.."Gym"]=v end)
    for _,g in ipairs(gymLocations) do dd:Add(g) end
    local tg = farmGymsFolder:AddSwitch(wt,function(s)
        getgenv().workingGym=s
        if not s then return end
        for k,t in pairs(gymToggles) do if k~=wt then t:Set(false) end end
        local sg = _G["selected"..cn.."Gym"]
        local cf = workoutPositions[wt][sg]
        if cf then teleportAndStart(cf) end
    end)
    gymToggles[wt]=tg
end

local FarmTab = window:AddTab("Farm")
local rockFolder = FarmTab:AddFolder("  Auto Rocks")

local function AddAutoPunchRock(t,rn,d)
    local e = false
    rockFolder:AddSwitch(t,function(s)
        e=s
        if e then
            task.spawn(function()
                while e do
                    local r = tonumber(rn) and Workspace.machinesFolder:GetChildren()[tonumber(rn)] or Workspace.machinesFolder:FindFirstChild(rn)
                    if r and LP.Character and LP.Character:FindFirstChild("LeftHand") then
                        firetouchinterest(r.Rock,LP.Character.LeftHand,0) task.wait(d) firetouchinterest(r.Rock,LP.Character.LeftHand,1)
                    end
                    RunService.Heartbeat:Wait()
                end
            end)
        end
    end)
end

AddAutoPunchRock("Auto Punch Jungle Rock (10M)","Ancient Jungle Rock",0.0001)
AddAutoPunchRock("Auto Punch King Rock (5M)","Muscle King Mountain",0.0001)
AddAutoPunchRock("Auto Punch Legends Rock (1M)","Rock Of Legends",0.01)
AddAutoPunchRock("Auto Punch Inferno Rock (750K)","Inferno Rock",0.01)
AddAutoPunchRock("Auto Punch Mystic Rock (400K)",6,0.01)
AddAutoPunchRock("Auto Punch Frozen Rock (150K)","Frozen Rock",0.01)
AddAutoPunchRock("Auto Punch Golden Rock (5K)","Punching Rock",0.01)
AddAutoPunchRock("Auto Punch Tiny Rock (0)","Tiny Rock",0.01)

rockFolder:AddSwitch("Auto Punch",function(s)
    _G.autopunch=s
    if s then
        local cn
        cn = RunService.Heartbeat:Connect(function()
            if not _G.autopunch then cn:Disconnect() return end
            local c,h = LP.Character,nil
            h = c and c:FindFirstChildOfClass("Humanoid")
            if h then
                local pt = LP.Backpack:FindFirstChild("Punch")
                if pt then h:EquipTool(pt) end
                LP.muscleEvent:FireServer("punch","rightHand")
                LP.muscleEvent:FireServer("punch","leftHand")
            end
        end)
    end
end)

local RockFolder = FarmTab:AddFolder("  Auto Rock V2")
local RockToggles = {["5M"]=false,["1M"]=false,["750K"]=false,["400K"]=false,["150K"]=false}
local function StartRockFarm(tn,p)
    task.spawn(function()
        while RockToggles[tn] do
            local c = LP.Character
            if c and c:FindFirstChild("HumanoidRootPart") then c.HumanoidRootPart.CFrame=CFrame.new(p) end
            task.wait(0.05)
        end
    end)
end

RockFolder:AddSwitch("Auto Rock (5M)",function(s) RockToggles["5M"]=s if s then StartRockFarm("5M",Vector3.new(-8976,9,-6130)) end end)
RockFolder:AddSwitch("Auto Rock (1M)",function(s) RockToggles["1M"]=s if s then StartRockFarm("1M",Vector3.new(4111.1640625,991.6776123046875,-4043.022216796875)) end end)
RockFolder:AddSwitch("Auto Rock (750K)",function(s) RockToggles["750K"]=s if s then StartRockFarm("750K",Vector3.new(-7293.18,8.42,-1232.74)) end end)
RockFolder:AddSwitch("Auto Rock (400K)",function(s) RockToggles["400K"]=s if s then StartRockFarm("400K",Vector3.new(2152.55,10.17,1272.46)) end end)
RockFolder:AddSwitch("Auto Rock (150K)",function(s) RockToggles["150K"]=s if s then StartRockFarm("150K",Vector3.new(-2528.79,7.32,-207.19)) end end)

local autoEquipToolsFolder = FarmTab:AddFolder("  Auto Equip Tools")

autoEquipToolsFolder:AddButton("Gamepass AutoLift",function()
    local gpf = RS.gamepassIds
    for _,gp in pairs(gpf:GetChildren()) do
        local v = Instance.new("IntValue")
        v.Name,v.Value,v.Parent = gp.Name,gp.Value,LP.ownedGamepasses
    end
end,"Desbloquea el gamepass de AutoLift gratis")

local function addToolSwitch(n,tn)
    autoEquipToolsFolder:AddSwitch(n,function(v)
        _G["Auto"..tn]=v
        if v then
            local t = LP.Backpack:FindFirstChild(tn)
            if t then LP.Character.Humanoid:EquipTool(t) end
        else
            local c,e = LP.Character,nil
            e = c and c:FindFirstChild(tn)
            if e then e.Parent=LP.Backpack end
        end
        if v then task.spawn(function() while _G["Auto"..tn] do if not _G["Auto"..tn] then break end LP.muscleEvent:FireServer("rep") task.wait(0.1) end end) end
    end)
end

addToolSwitch("Auto Weight","Weight")
addToolSwitch("Auto Pushups","Pushups")
addToolSwitch("Auto Handstands","Handstands")
addToolSwitch("Auto Situps","Situps")

autoEquipToolsFolder:AddSwitch("Auto Punch",function(v)
    _G.fastHitActive=v
    if v then
        task.spawn(function() while _G.fastHitActive do if not _G.fastHitActive then break end local p,pt = LP,LP.Backpack:FindFirstChild("Punch") if pt then pt.Parent=LP.Character if pt:FindFirstChild("attackTime") then pt.attackTime.Value=0 end end task.wait(0.1) end end)
        task.spawn(function() while _G.fastHitActive do if not _G.fastHitActive then break end LP.muscleEvent:FireServer("punch","rightHand") LP.muscleEvent:FireServer("punch","leftHand") local c,pt = LP.Character,nil pt = c and c:FindFirstChild("Punch") if pt then pt:Activate() end task.wait(0) end end)
    else
        local c,e = LP.Character,nil
        e = c and c:FindFirstChild("Punch")
        if e then e.Parent=LP.Backpack end
    end
end)

autoEquipToolsFolder:AddSwitch("Fast Tools",function(v)
    _G.FastTools=v
    local ds = {{"Punch","attackTime",v and 0 or 0.35},{"Ground Slam","attackTime",v and 0 or 6},{"Stomp","attackTime",v and 0 or 7},{"Handstands","repTime",v and 0 or 1},{"Pushups","repTime",v and 0 or 1},{"Weight","repTime",v and 0 or 1},{"Situps","repTime",v and 0 or 1}}
    local bp = LP:WaitForChild("Backpack")
    for _,ti in ipairs(ds) do
        local t = bp:FindFirstChild(ti[1])
        if t and t:FindFirstChild(ti[2]) then t[ti[2]].Value=ti[3] end
        local et = LP.Character and LP.Character:FindFirstChild(ti[1])
        if et and et:FindFirstChild(ti[2]) then et[ti[2]].Value=ti[3] end
    end
end)

local rebirthsFolder = FarmTab:AddFolder("  Auto Rebirths")
targetRebirthValue = 0

rebirthsFolder:AddTextBox("Rebirth Target",function(txt)
    local nv = tonumber(txt)
    if nv and nv>0 then
        targetRebirthValue=nv
        game:GetService("StarterGui"):SetCore("SendNotification",{Title="Objetivo Actualizado",Text="Nuevo objetivo: "..tostring(targetRebirthValue).." renacimientos",Duration=0})
    else
        game:GetService("StarterGui"):SetCore("SendNotification",{Title="Entrada Inválida",Text="Por favor ingresa un número válido mayor que 0",Duration=0})
    end
end)

local infiniteSwitch
local targetSwitch = rebirthsFolder:AddSwitch("Auto Rebirth Target",function(b)
    _G.targetRebirthActive=b
    if b then
        if _G.infiniteRebirthActive and infiniteSwitch then infiniteSwitch:Set(false) _G.infiniteRebirthActive=false end
        spawn(function()
            while _G.targetRebirthActive and wait(0.1) do
                local cr = LP.leaderstats.Rebirths.Value
                if cr>=targetRebirthValue then
                    targetSwitch:Set(false) _G.targetRebirthActive=false
                    game:GetService("StarterGui"):SetCore("SendNotification",{Title="¡Objetivo Alcanzado!",Text="Has alcanzado "..tostring(targetRebirthValue).." renacimientos",Duration=5})
                    break
                end
                RS.rEvents.rebirthRemote:InvokeServer("rebirthRequest")
            end
        end)
    end
end)

infiniteSwitch = rebirthsFolder:AddSwitch("Auto Rebirth (Infinite)",function(b)
    _G.infiniteRebirthActive=b
    if b then
        if _G.targetRebirthActive and targetSwitch then targetSwitch:Set(false) _G.targetRebirthActive=false end
        spawn(function() while _G.infiniteRebirthActive and wait(0.1) do RS.rEvents.rebirthRemote:InvokeServer("rebirthRequest") end end)
    end
end)

rebirthsFolder:AddSwitch("Auto Size 1",function(b)
    _G.autoSizeActive=b
    if b then spawn(function() while _G.autoSizeActive and wait() do RS.rEvents.changeSpeedSizeRemote:InvokeServer("changeSize",1) end end) end
end)

local autoSetEnabled,sizeValue = false,false
rebirthsFolder:AddSwitch("Auto Set Size 2",function(s)
    autoSetEnabled,_G.autoSetSizeEnabled = s,s
    if s then RS.rEvents.changeSpeedSizeRemote:InvokeServer("changeSize",sizeValue) end
end)

spawn(function() while true do if autoSetEnabled then RS.rEvents.changeSpeedSizeRemote:InvokeServer("changeSize",sizeValue) end wait(0.01) end end)

rebirthsFolder:AddSwitch("Auto Teleport King",function(s)
    _G.SafeZone=s
    if s then
        while _G.SafeZone do
            local c,p = LP.Character,Vector3.new(-8636,17,-5759)
            if c and c:FindFirstChild("HumanoidRootPart") then c.HumanoidRootPart.CFrame=CFrame.new(p) end
            task.wait(0.001)
        end
    end
end)

rebirthsFolder:AddButton("Anti Rebirth",function()
    local oldnc
    oldnc = hookmetamethod(game,"__namecall",function(self,...)
        local args = {...}
        if self.Name=="rebirthRemote" and args[1]=="rebirthRequest" then return end
        return oldnc(self,unpack(args))
    end)
end)

local toolsCombFolder = FarmTab:AddFolder("  Auto Tools OP")
toolsCombFolder:AddLabel("-----{ Weight + Punch }-----")

local function AddAutoTool(t,tn,rn,d)
    local e = false
    local function Eq()
        local bp,tl = LP:FindFirstChild("Backpack"),nil
        tl = bp and bp:FindFirstChild(tn)
        if tl and not LP.Character:FindFirstChild(tn) then LP.Character.Humanoid:EquipTool(tl) end
    end
    local function Uneq()
        local c,tl = LP.Character,nil
        tl = c and c:FindFirstChild(tn)
        if tl then tl.Parent=LP.Backpack end
    end
    local sw = toolsCombFolder:AddSwitch(t,function(s)
        e=s
        if e then
            Eq() _G.autopunch=true
            task.spawn(function()
                while e do
                    LP.muscleEvent:FireServer("rep")
                    local r = workspace.machinesFolder:FindFirstChild(rn)
                    if r and LP.Character and LP.Character:FindFirstChild("LeftHand") then
                        firetouchinterest(r.Rock,LP.Character.LeftHand,0) task.wait(d) firetouchinterest(r.Rock,LP.Character.LeftHand,1)
                    end
                    local c,h = LP.Character,nil
                    h = c and c:FindFirstChildOfClass("Humanoid")
                    if h then
                        local pt = LP.Backpack:FindFirstChild("Punch")
                        if pt then h:EquipTool(pt) end
                        LP.muscleEvent:FireServer("punch","rightHand")
                        LP.muscleEvent:FireServer("punch","leftHand")
                    end
                    RunService.RenderStepped:Wait()
                    Eq()
                end
            end)
        else
            _G.autopunch=false Uneq()
        end
    end)
    LP.CharacterAdded:Connect(function() if e then Eq() else Uneq() end end)
    sw:Set(false)
end

AddAutoTool("Auto Pushup + Auto Punch Rock","Pushups","Ancient Jungle Rock",0.0001)
AddAutoTool("Auto Situp + Auto Punch Rock","Situps","Ancient Jungle Rock",0.0001)
AddAutoTool("Auto Handstands + Auto Punch Rock","Handstands","Ancient Jungle Rock",0.0001)
AddAutoTool("Auto Weight + Auto Punch Rock","Weight","Ancient Jungle Rock",0.0001)

local PacksTab = window:AddTab("Packs")
local RebirthFolder = PacksTab:AddFolder("  Rebirth With Packs")

local blockedFrames = {"strengthFrame","durabilityFrame","agilityFrame"}
for _,n in ipairs(blockedFrames) do
    local f = RS:FindFirstChild(n)
    if f and f:IsA("GuiObject") then f.Visible=false end
end
RS.ChildAdded:Connect(function(c) if table.find(blockedFrames,c.Name) and c:IsA("GuiObject") then c.Visible=false end end)

local function formatNumber(n)
    if n>=1e15 then return string.format("%.2fQ",n/1e15) end
    if n>=1e12 then return string.format("%.2fT",n/1e12) end
    if n>=1e9 then return string.format("%.2fB",n/1e9) end
    if n>=1e6 then return string.format("%.2fM",n/1e6) end
    if n>=1e3 then return string.format("%.2fK",n/1e3) end
    return string.format("%.0f",n)
end

local isRunning,startTime,totalElapsed,initialRebirths = false,0,0,rebirthsStat.Value
local serverLabel = RebirthFolder:AddLabel("Time:") serverLabel.TextSize=20
local timeLabel = RebirthFolder:AddLabel("0d 0h 0m 0s - Inactive")
local paceLabel = RebirthFolder:AddLabel("Pace: 0 / Hour | 0 / Day | 0 / Week")
local averagePaceLabel = RebirthFolder:AddLabel("Average Pace: 0 / Hour | 0 / Day | 0 / Week")
paceLabel.TextSize,averagePaceLabel.TextSize,timeLabel.TextSize,timeLabel.TextColor3 = 17,17,17,Color3.fromRGB(255,50,50)
local rebirthsStatsLabel = RebirthFolder:AddLabel("Rebirths: "..formatNumber(rebirthsStat.Value).." | Gained: 0") rebirthsStatsLabel.TextSize=17

local lastRebirthTime,lastRebirthValue = tick(),rebirthsStat.Value
local function updateRebirthsLabel()
    local g = rebirthsStat.Value-initialRebirths
    rebirthsStatsLabel.Text = string.format("Rebirths: %s | Gained: %s",formatNumber(rebirthsStat.Value),formatNumber(g))
end

local function updateUI(f)
    local ct,e = tick(),isRunning and (ct-startTime+totalElapsed) or totalElapsed
    local d,h,m,s = math.floor(e/86400),math.floor((e%86400)/3600),math.floor((e%3600)/60),math.floor(e%60)
    timeLabel.Text = string.format("%dd %dh %dm %ds - %s",d,h,m,s,isRunning and "Rebirthing" or "Paused")
    timeLabel.TextColor3 = isRunning and Color3.fromRGB(50,255,50) or Color3.fromRGB(255,50,50)
end

local paceHistoryHour,paceHistoryDay,paceHistoryWeek,maxHistoryLength,rebirthCount = {},{},{},20,0
local function calculatePaceOnRebirth()
    rebirthCount = rebirthCount+1
    if rebirthCount<2 then lastRebirthTime,lastRebirthValue = tick(),rebirthsStat.Value return end
    local now,g = tick(),rebirthsStat.Value-lastRebirthValue
    if g>0 then
        local at = (now-lastRebirthTime)/g
        local ph,pd,pw = 3600/at,86400/at,604800/at
        paceLabel.Text = string.format("Pace: %s / Hour | %s / Day | %s / Week",formatNumber(ph),formatNumber(pd),formatNumber(pw))
        table.insert(paceHistoryHour,ph) table.insert(paceHistoryDay,pd) table.insert(paceHistoryWeek,pw)
        if #paceHistoryHour>maxHistoryLength then table.remove(paceHistoryHour,1) table.remove(paceHistoryDay,1) table.remove(paceHistoryWeek,1) end
        local function avg(tbl) local sm=0 for _,v in ipairs(tbl) do sm=sm+v end return #tbl>0 and (sm/#tbl) or 0 end
        local ah,ad,aw = avg(paceHistoryHour),avg(paceHistoryDay),avg(paceHistoryWeek)
        averagePaceLabel.Text = string.format("Average Pace: %s / Hour | %s / Day | %s / Week",formatNumber(ah),formatNumber(ad),formatNumber(aw))
        lastRebirthTime,lastRebirthValue = now,rebirthsStat.Value
    end
end

rebirthsStat:GetPropertyChangedSignal("Value"):Connect(function() calculatePaceOnRebirth() updateRebirthsLabel() end)

local function managePets(pn)
    for _,f in pairs(LP.petsFolder:GetChildren()) do
        if f:IsA("Folder") then for _,p in pairs(f:GetChildren()) do RS.rEvents.equipPetEvent:FireServer("unequipPet",p) end end
    end
    task.wait(0.1)
    for _,p in pairs(LP.petsFolder.Unique:GetChildren()) do if p.Name==pn then RS.rEvents.equipPetEvent:FireServer("equipPet",p) end end
end

local function doRebirth()
    local rb,st = rebirthsStat.Value,5000+(rb*2550)
    while isRunning and LP.leaderstats.Strength.Value<st do
        local rp = LP.MembershipType==Enum.MembershipType.Premium and 8 or 14
        for _=1,rp do muscleEvent:FireServer("rep") end
        task.wait(0.02)
    end
    if isRunning and LP.leaderstats.Strength.Value>=st then
        managePets("Tribal Overlord") task.wait(0.25)
        local bf = rebirthsStat.Value
        repeat RS.rEvents.rebirthRemote:InvokeServer("rebirthRequest") task.wait(0.05) until rebirthsStat.Value>bf or not isRunning
    end
end

local function fastRebirthLoop() while isRunning do managePets("Swift Samurai") doRebirth() task.wait(0.5) end end

RebirthFolder:AddLabel("")
local RebirthLabel = RebirthFolder:AddLabel("Rebirthing:") RebirthLabel.TextSize=20
RebirthFolder:AddSwitch("Fast Rebirth",function(s)
    isRunning=s
    if s then startTime=tick() task.spawn(fastRebirthLoop) else totalElapsed=totalElapsed+(tick()-startTime) updateUI(true) end
end)

task.spawn(function() while true do updateUI(false) task.wait(0.1) end end)

local running,thread = false,nil
local sizeeSwitch = RebirthFolder:AddSwitch("Set Size 1",function(b)
    running=b
    if running then thread=coroutine.create(function() while running do RS.rEvents.changeSpeedSizeRemote:InvokeServer("changeSize",1) wait(0.01) end end) coroutine.resume(thread) end
end)

RebirthFolder:AddButton("Anti Lag",function()
    local pg,lt = LP:WaitForChild("PlayerGui"),game:GetService("Lighting")
    for _,g in pairs(pg:GetChildren()) do if g:IsA("ScreenGui") then g:Destroy() end end
    local function darkenSky()
        for _,v in pairs(lt:GetChildren()) do if v:IsA("Sky") then v:Destroy() end end
        local ds = Instance.new("Sky") ds.Name="DarkSky"
        ds.SkyboxBk,ds.SkyboxDn,ds.SkyboxFt,ds.SkyboxLf,ds.SkyboxRt,ds.SkyboxUp,ds.Parent = "rbxassetid://0","rbxassetid://0","rbxassetid://0","rbxassetid://0","rbxassetid://0","rbxassetid://0",lt
        lt.Brightness,lt.ClockTime,lt.TimeOfDay,lt.OutdoorAmbient,lt.Ambient,lt.FogColor,lt.FogEnd = 0,0,"00:00:00",Color3.new(0,0,0),Color3.new(0,0,0),Color3.new(0,0,0),100
        task.spawn(function() while true do wait(5) if not lt:FindFirstChild("DarkSky") then ds:Clone().Parent=lt end lt.Brightness,lt.ClockTime,lt.OutdoorAmbient,lt.Ambient,lt.FogColor,lt.FogEnd = 0,0,Color3.new(0,0,0),Color3.new(0,0,0),Color3.new(0,0,0),100 end end)
    end
    for _,o in pairs(workspace:GetDescendants()) do if o:IsA("ParticleEmitter") or o:IsA("PointLight") or o:IsA("SpotLight") or o:IsA("SurfaceLight") then o:Destroy() end end
    darkenSky()
end)

RebirthFolder:AddLabel("")
local miscLabel = RebirthFolder:AddLabel("Misc:") miscLabel.TextSize=20

local lockRunning,lockThread = false,nil
local lockSwitch = RebirthFolder:AddSwitch("Lock Position",function(s)
    lockRunning=s
    if lockRunning then
        local c,hrp = LP.Character or LP.CharacterAdded:Wait(),nil hrp = c:WaitForChild("HumanoidRootPart")
        local lp = hrp.Position
        lockThread=coroutine.create(function() while lockRunning do hrp.Velocity,hrp.RotVelocity,hrp.CFrame = Vector3.new(0,0,0),Vector3.new(0,0,0),CFrame.new(lp) wait(0.05) end end)
        coroutine.resume(lockThread)
    end
end)

local function activateShake()
    local t = LP.Character:FindFirstChild("Tropical Shake") or LP.Backpack:FindFirstChild("Tropical Shake")
    if t then muscleEvent:FireServer("tropicalShake",t) end
end

local rn = false
task.spawn(function() while true do if rn then activateShake() task.wait(450) else task.wait(1) end end end)
local autoshakeSwitch = RebirthFolder:AddSwitch("Auto Shake",function(s) rn=s if s then activateShake() end end) autoshakeSwitch:Set(false)

local spinwheelSwitch = RebirthFolder:AddSwitch("Spin Fortune Wheel",function(b)
    _G.AutoSpinWheel=b
    if b then spawn(function() while _G.AutoSpinWheel and wait(1) do RS.rEvents.openFortuneWheelRemote:InvokeServer("openFortuneWheel",RS.fortuneWheelChances["Fortune Wheel"]) end end) end
end)

RebirthFolder:AddButton("Jungle Lift",function()
    local c,hrp = LP.Character or LP.CharacterAdded:wait(),nil hrp = c:WaitForChild("HumanoidRootPart")
    hrp.CFrame = CFrame.new(-8642.396484375,6.7980651855,2086.1030273) task.wait(0.2)
    VIM:SendKeyEvent(true,Enum.KeyCode.E,false,game) task.wait(0.05) VIM:SendKeyEvent(false,Enum.KeyCode.E,false,game)
end)

local StrengthFolder = PacksTab:AddFolder("Strength With Packs")
local strengthStat,durabilityStat = leaderstats:WaitForChild("Strength"),LP:WaitForChild("Durability")

StrengthFolder:AddLabel("Time:").TextSize=20
local stopwatchLabel = StrengthFolder:AddLabel("0d 0h 0m 0s - Fast Rep Inactive") stopwatchLabel.TextSize,stopwatchLabel.TextColor3 = 17,Color3.fromRGB(255,50,50)
local projectedStrengthLabel = StrengthFolder:AddLabel("Strength Pace: 0 /Hour | 0 /Day | 0 /Week") projectedStrengthLabel.TextSize=17
local projectedDurabilityLabel = StrengthFolder:AddLabel("Durability Pace: 0 /Hour | 0 /Day | 0 /Week") projectedDurabilityLabel.TextSize=17
local averageStrengthLabel = StrengthFolder:AddLabel("Average Strength Pace: 0 /Hour | 0 /Day | 0 /Week") averageStrengthLabel.TextSize=17
local averageDurabilityLabel = StrengthFolder:AddLabel("Average Durability Pace: 0 /Hour | 0 /Day | 0 /Week") averageDurabilityLabel.TextSize=17
StrengthFolder:AddLabel("").TextSize=10
local statsLabel = StrengthFolder:AddLabel("Stats:") statsLabel.TextSize=20
local strengthLabel = StrengthFolder:AddLabel("Strength: 0 | Gained: 0") strengthLabel.TextSize=17
local durabilityLabel = StrengthFolder:AddLabel("Durability: 0 | Gained: 0") durabilityLabel.TextSize=17

local sTime,pausedElapsedTime,runFastRep,trackingStarted,strengthHistory,durabilityHistory,calculationInterval = 0,0,false,false,{},{},10
local initialStrength,initialDurability = strengthStat.Value,durabilityStat.Value

task.spawn(function()
    local lct = tick()
    while true do
        local ct,cs,cd = tick(),strengthStat.Value,durabilityStat.Value
        strengthLabel.Text = "Strength: "..formatNumber(cs).." | Gained: "..formatNumber(cs-initialStrength)
        durabilityLabel.Text = "Durability: "..formatNumber(cd).." | Gained: "..formatNumber(cd-initialDurability)
        if runFastRep then
            if not trackingStarted then trackingStarted,sTime,strengthHistory,durabilityHistory = true,ct,{},{} end
            local et = pausedElapsedTime+(ct-sTime)
            local d,h,m,s = math.floor(et/(24*3600)),math.floor((et%(24*3600))/3600),math.floor((et%3600)/60),math.floor(et%60)
            stopwatchLabel.Text = string.format("%dd %dh %dm %ds - Fast Rep Running",d,h,m,s) stopwatchLabel.TextColor3 = Color3.fromRGB(50,255,50)
            table.insert(strengthHistory,{time=ct,value=cs}) table.insert(durabilityHistory,{time=ct,value=cd})
            while #strengthHistory>0 and ct-strengthHistory[1].time>calculationInterval do table.remove(strengthHistory,1) end
            while #durabilityHistory>0 and ct-durabilityHistory[1].time>calculationInterval do table.remove(durabilityHistory,1) end
            if ct-lct>=calculationInterval then
                lct=ct
                if #strengthHistory>=2 then
                    local sd,sps = strengthHistory[#strengthHistory].value-strengthHistory[1].value,0
                    sps = sd/calculationInterval
                    local sph,spd,spw = sps*3600,sps*86400,sps*604800
                    projectedStrengthLabel.Text = "Strength Pace: "..formatNumber(sph).."/Hour | "..formatNumber(spd).."/Day | "..formatNumber(spw).."/Week"
                end
                if #durabilityHistory>=2 then
                    local dd,dps = durabilityHistory[#durabilityHistory].value-durabilityHistory[1].value,0
                    dps = dd/calculationInterval
                    local dph,dpd,dpw = dps*3600,dps*86400,dps*604800
                    projectedDurabilityLabel.Text = "Durability Pace: "..formatNumber(dph).."/Hour | "..formatNumber(dpd).."/Day | "..formatNumber(dpw).."/Week"
                end
                local te = pausedElapsedTime+(ct-sTime)
                if te>0 then
                    local asps,aspH,aspD,aspW = (cs-initialStrength)/te,0,0,0
                    aspH,aspD,aspW = asps*3600,asps*86400,asps*604800
                    averageStrengthLabel.Text = "Average Strength Pace: "..formatNumber(aspH).."/Hour | "..formatNumber(aspD).."/Day | "..formatNumber(aspW).."/Week"
                    local adps,adpH,adpD,adpW = (cd-initialDurability)/te,0,0,0
                    adpH,adpD,adpW = adps*3600,adps*86400,adps*604800
                    averageDurabilityLabel.Text = "Average Durability Pace: "..formatNumber(adpH).."/Hour | "..formatNumber(adpD).."/Day | "..formatNumber(adpW).."/Week"
                end
            end
        else
            if trackingStarted then
                trackingStarted,pausedElapsedTime = false,pausedElapsedTime+(ct-sTime)
                stopwatchLabel.Text = string.format("%dd %dh %dm %ds - Fast Rep Stopped",math.floor(pausedElapsedTime/(24*3600)),math.floor((pausedElapsedTime%(24*3600))/3600),math.floor((pausedElapsedTime%3600)/60),math.floor(pausedElapsedTime%60))
                stopwatchLabel.TextColor3 = Color3.fromRGB(255,165,0)
                projectedStrengthLabel.Text,projectedDurabilityLabel.Text,averageStrengthLabel.Text,averageDurabilityLabel.Text = "Strength Pace: 0 /Hour | 0 /Day | 0 /Week","Durability Pace: 0 /Hour | 0 /Day | 0 /Week","Average Strength Pace: 0 /Hour | 0 /Day | 0 /Week","Average Durability Pace: 0 /Hour | 0 /Day | 0 /Week"
                strengthHistory,durabilityHistory = {},{}
            end
        end
        task.wait(0.05)
    end
end)

StrengthFolder:AddLabel("")
StrengthFolder:AddLabel("Fast Farm (Recommended Speed: 20)").TextSize=20

local repsPerTick = 1
local function getPing()
    local st,ps = game:GetService("Stats"),nil
    ps = st:FindFirstChild("PerformanceStats") and st.PerformanceStats:FindFirstChild("Ping")
    return ps and ps:GetValue() or 0
end

StrengthFolder:AddTextBox("Rep Speed",function(v) local n = tonumber(v) if n and n>0 then repsPerTick=math.floor(n) end end,{placeholder="1"})

local function fastRepLoop()
    while runFastRep do
        local st = tick()
        while tick()-st<0.75 and runFastRep do for i=1,repsPerTick do muscleEvent:FireServer("rep") end task.wait(0.02) end
        while runFastRep and getPing()>=350 do task.wait(1) end
    end
end

StrengthFolder:AddSwitch("Fast Rep",function(s)
    if s and not runFastRep then runFastRep=true task.spawn(fastRepLoop)
    elseif not s and runFastRep then runFastRep=false end
end)

StrengthFolder:AddLabel("")
StrengthFolder:AddLabel("Misc:").TextSize=20

local function unequipPets()
    for _,f in pairs(LP.petsFolder:GetChildren()) do
        if f:IsA("Folder") then for _,p in pairs(f:GetChildren()) do RS.rEvents.equipPetEvent:FireServer("unequipPet",p) end end
    end
    task.wait(0.1)
end

local function equipPetsByName(n)
    unequipPets() task.wait(0.01)
    for _,p in pairs(LP.petsFolder.Unique:GetChildren()) do if p.Name==n then RS.rEvents.equipPetEvent:FireServer("equipPet",p) end end
end

local function activateProteinEgg()
    local t = LP.Character:FindFirstChild("Protein Egg") or LP.Backpack:FindFirstChild("Protein Egg")
    if t then muscleEvent:FireServer("proteinEgg",t) end
end

local run = false
task.spawn(function() while true do if run then activateProteinEgg() task.wait(1800) else task.wait(1) end end end)
local sw = StrengthFolder:AddSwitch("Auto Egg",function(s) run=s if s then activateProteinEgg() end end) sw:Set(false)

local rnn = false
task.spawn(function() while true do if rnn then activateShake() task.wait(900) else task.wait(1) end end end)
local sww = StrengthFolder:AddSwitch("Auto Shake",function(s) rnn=s if s then activateShake() end end) sww:Set(false)

local sppinwheelSwitch = StrengthFolder:AddSwitch("Spin Fortune Wheel",function(b)
    _G.AutoSpinWheel=b
    if b then spawn(function() while _G.AutoSpinWheel and wait(1) do RS.rEvents.openFortuneWheelRemote:InvokeServer("openFortuneWheel",RS.fortuneWheelChances["Fortune Wheel"]) end end) end
end)

StrengthFolder:AddButton("Jungle Squat",function()
    local c,hrp = LP.Character or LP.CharacterAdded:wait(),nil hrp = c:WaitForChild("HumanoidRootPart")
    hrp.CFrame = CFrame.new(-8371.43359375,6.79806327,2858.88525390) task.wait(0.2)
    VIM:SendKeyEvent(true,Enum.KeyCode.E,false,game) task.wait(0.05) VIM:SendKeyEvent(false,Enum.KeyCode.E,false,game)
end)

StrengthFolder:AddButton("Anti Lag",function()
    local pg,lt = LP:WaitForChild("PlayerGui"),game:GetService("Lighting")
    for _,g in pairs(pg:GetChildren()) do if g:IsA("ScreenGui") then g:Destroy() end end
    local function darkenSky()
        for _,v in pairs(lt:GetChildren()) do if v:IsA("Sky") then v:Destroy() end end
        local ds = Instance.new("Sky") ds.Name="DarkSky"
        ds.SkyboxBk,ds.SkyboxDn,ds.SkyboxFt,ds.SkyboxLf,ds.SkyboxRt,ds.SkyboxUp,ds.Parent = "rbxassetid://0","rbxassetid://0","rbxassetid://0","rbxassetid://0","rbxassetid://0","rbxassetid://0",lt
        lt.Brightness,lt.ClockTime,lt.TimeOfDay,lt.OutdoorAmbient,lt.Ambient,lt.FogColor,lt.FogEnd = 0,0,"00:00:00",Color3.new(0,0,0),Color3.new(0,0,0),Color3.new(0,0,0),100
        task.spawn(function() while true do wait(5) if not lt:FindFirstChild("DarkSky") then ds:Clone().Parent=lt end lt.Brightness,lt.ClockTime,lt.OutdoorAmbient,lt.Ambient,lt.FogColor,lt.FogEnd = 0,0,Color3.new(0,0,0),Color3.new(0,0,0),Color3.new(0,0,0),100 end end)
    end
    for _,o in pairs(workspace:GetDescendants()) do if o:IsA("ParticleEmitter") or o:IsA("PointLight") or o:IsA("SpotLight") or o:IsA("SurfaceLight") then o:Destroy() end end
    darkenSky()
end)

StrengthFolder:AddButton("Equip Swift Samurai",function() unequipPets() equipPetsByName("Swift Samurai") end)

local StatsTab = window:AddTab("Stats")
local MiscTab = window:AddTab("Misc")
local PetsTab = window:AddTab("Pets")
local DataTab = window:AddTab("Data")
local GiftTab = window:AddTab("Gift")
local KillerTab = window:AddTab("Killer")
local ExtrasTab = window:AddTab("Extras")
local TeleportTab = window:AddTab("Teleport")
