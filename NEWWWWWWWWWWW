-- Holaaaaa

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

local PetsOrder = {
    "Wild Wizard",
    "Mighty Monster"
}

local running = false

-- Verificar si ya estÃ¡n equipadas correctamente
local function needsEquip()
    local count = 0
    for _, pet in pairs(player.petsFolder.Equipped:GetChildren()) do
        if table.find(PetsOrder, pet.Name) then
            count += 1
        end
    end
    return count < 8
end

Killer:AddSwitch("Bug Packs", function(state)
    running = state
    if not state then return end

    task.spawn(function()
        while running do
            if needsEquip() then
                local petsFolder = player.petsFolder

                -- Pool
                local petPools = {
                    ["Wild Wizard"] = {},
                    ["Mighty Monster"] = {}
                }

                for _, pet in pairs(petsFolder.Unique:GetChildren()) do
                    if petPools[pet.Name] then
                        table.insert(petPools[pet.Name], pet)
                    end
                end

                local equipped = 0
                local index = 1

                while equipped < 8 and running do
                    local petName = PetsOrder[index]
                    local pool = petPools[petName]

                    if pool and #pool > 0 then
                        ReplicatedStorage.rEvents.equipPetEvent:FireServer(
                            "equipPet",
                            table.remove(pool, 1)
                        )
                        equipped += 1
                    end

                    index = (index % #PetsOrder) + 1
                end
            end

            task.wait(1) -- ðŸ”¥ CLAVE: loop ligero
        end
    end)
end)

